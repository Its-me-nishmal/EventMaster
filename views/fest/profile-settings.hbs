<section>
    <div class="fest-container">
        <div class="settings-mainDiv">
            <div class="pointTable-header">
                <h4 class="adminHome-sectin-one-SubHeading"><a href="/admin/{{FestDetails.FestId}}/settings"><span
                            class="back-button"><i class="bi bi-chevron-left"></i> Back</span></a>Settings / Profile
                </h4>
                <hr>
            </div>
            <div class="fest-profile-content">
                <div class="settings-content">
                    {{!-- Edit Logo --}}
                    <div style="width: 100%; background-color:rgb(155, 154, 154)" class="settings-items"
                        onclick="clickOne()">
                        <h4><i class="bi bi-bullseye"></i> Edit fest logo</h4>
                        <i id="clickIcon" style="color: black; " class="bi bi-chevron-up"></i>
                    </div>
                    <div id="manualOne" class="fest-profile-settings-item-content">
                        <div class="fest-profile-settings-session1">
                            <div class="profile-Image-main-Div">
                                <form action="/admin/{{FestDetails.FestId}}/settings/fest-profile/imageUpload"
                                    method="POST" enctype="multipart/form-data">
                                    <img src="/images/fest-logo/{{FestDetails.FestId}}.jpg" alt="fest-logo"
                                        id="profileview" onerror="this.onerror=null;callfun(this);">
                                    <input type="file" name="profile" id="profile" onchange="viewImage(event)"
                                        accept="image/jpg, image/jpeg" required>
                                    <button onclick="uploading()" style="display: none;" id="uploadButton"
                                        type="submit"><i class="bi bi-upload"></i> Upload</button>

                                    <p style="font-size: 12px; text-align:center;">Photo must be 400 x 400 px in size
                                        <br>and less than 500 KB</p>
                                </form>
                            </div>

                        </div>
                    </div>
                    {{!-- Edit Fest Details --}}
                    <div style="width: 100%; background-color:rgb(155, 154, 154)" class="settings-items"
                        onclick="clickTwo()">
                        <h4><i class="bi bi-card-heading"></i> Edit fest details</h4>
                        <i id="clickIcon2" style="color: black; " class="bi bi-chevron-down"></i>
                    </div>
                    <div style="display:none" id="manual2" class="fest-profile-settings-item-content">
                        <div class="fest-profile-settings-session2  ">
                            <div class="FestDetailsEditDiv">
                                <form action="/admin/{{FestDetails.FestId}}/settings/fest-profile/editFestDetails"
                                    method="POST">
                                    <div class="FestDetailsEditLapToggle">
                                        <div class="festDetialsEditsubDiv">
                                            <label for="">Fest ID</label>
                                            <input style="cursor:not-allowed; " type="text" name="FestId"
                                                value="{{ FestFullDetails.FestId}}" required readonly>
                                        </div>
                                        <div class="festDetialsEditsubDiv">
                                            <label for="">Fest Name</label>
                                            <input type="text" id="hi" name="FestName" value="{{ FestFullDetails.FestName}}"
                                                required>
                                        </div>
                                        <div class="festDetialsEditsubDiv">
                                            <label for="">Fest Date <small id="festDate"
                                                    style="margin-left: 10px; font-style:italic; color:rgb(80, 79, 79);">Current date : {{FestDetails.FestDate}}</small></label>
                                            <input type="date" id="festDateInput" name="FestDate" value="" required>
                                        </div>
                                        <div class="festDetialsEditsubDiv">
                                            <label for="">Fest Converner name</label>
                                            <input type="text" name="FestConvener"
                                                value="{{ FestFullDetails.FestConvener}}" required>
                                        </div>
                                        <div class="festDetialsEditsubDiv">
                                            <label for="">Number of groups</label>
                                            <input type="number" name="NumberGroups"
                                                value="{{ FestFullDetails.NumberGroups}}" required>
                                        </div>
                                        <div class="festDetialsEditsubDiv">
                                            <label for="">Number of sessions</label>
                                            <input type="number" name="NumberSessions"
                                                value="{{ FestFullDetails.NumberSessions}}" required>
                                        </div>
                                    </div>
                                    <div class="FestDetailsEditSubmitDiv">
                                        <button type="submit">Submit edits</button>
                                    </div>
                                </form>

                            </div>
                        </div>
                    </div>
                    {{!-- change password --}}
                    <div style="width: 100%; background-color:rgb(155, 154, 154)" class="settings-items"
                        onclick="clickFour()">
                        <h4><i class="bi bi-pencil-square"></i> Change password</h4>
                        <i id="clickIcon4" style="color: black; " class="bi bi-chevron-down"></i>
                    </div>
                    <div style="display:none" id="manual4" class="fest-profile-settings-item-content">
                        <div class="fest-profile-settings-session2  ">
                            <div class="FestDetailsEditDiv">
                                <form action="/admin/{{FestDetails.FestId}}/settings/fest-profile/change-password"
                                    id="changepasswordForm" method="POST" onsubmit="return sessionOneInputs()">
                                    <div class="FestDetailsEditLapToggle">
                                        <div class="festDetialsEditsubDiv">
                                            <label for="">Fest ID</label>
                                            <input style="cursor:not-allowed; " type="text" name="FestId"
                                                value="{{ FestFullDetails.FestId}}" required readonly>
                                        </div>
                                        <div class="festDetialsEditsubDiv">
                                            <label for="">Current password</label>
                                            <input type="password" name="Password" id="oldPassword" required>
                                            <i id="Icon1" class="bi bi-eye-fill" onclick="showOldPassword()"></i>
                                        </div>
                                        <div class="festDetialsEditsubDiv">
                                            <label for="">New password</label>
                                            <input type="password" name="NewPassword" minlength="6" maxlength="12"
                                                id="password" required>
                                            <i id="Icon2" class="bi bi-eye-fill" onclick="showPassword()"></i>
                                        </div>
                                        <div class="festDetialsEditsubDiv">
                                            <label for="">Confierm password</label>
                                            <input type="password" id="Cpassword" required>
                                            <i id="Icon3" class="bi bi-eye-fill" onclick="showCPassword()"></i>
                                        </div>

                                    </div>
                                    <div class="FestDetailsEditSubmitDiv">
                                        <button type="submit">Submit</button>
                                    </div>
                                </form>



                            </div>
                        </div>
                    </div>
                    {{!-- Group settings --}}
                    <div style="width: 100%; background-color:rgb(155, 154, 154)" class="settings-items"
                        onclick="clickThree()">
                        <h4><i class="bi bi-gear-wide"></i> Group settings</h4>
                        <i id="clickIcon3" style="color: black; " class="bi bi-chevron-down"></i>
                    </div>
                    <div style="display:none" id="manual3" class="fest-profile-settings-item-content">
                        <div class="">
                            <div class="allGroupsTableDiv">
                                <table id="allGroup-table" class="auto-index">
                                    <thead>
                                        <tr>
                                            <th>Sl no</th>
                                            <th>Group name</th>
                                            <th>Group ID</th>
                                            <th>Edit</th>
                                            <th>Delete</th>


                                        </tr>
                                    </thead>
                                    <tbody>
                                        {{#each AllGroups}}
                                        <tr>
                                            <td></td>
                                            <!--leave it blank-->
                                            <td>{{this.GroupName}}</td>
                                            <td>{{this.GroupId}}</td>
                                            <td>
                                                {{#if this.GroupId}}
                                                <a
                                                    href="/admin/{{this.FestId}}/settings/fest-profile/edit-group/{{this.GroupName}}">
                                                    <button style="background-color: var(--color-blueDark2);"
                                                        class="pointCateoryDeletButton"> <i
                                                            class="bi bi-pencil-fill"></i></button></a>
                                                {{else}}
                                                <a style="color: black;"
                                                    href="/admin/{{../FestDetails.FestId}} /groups"><i
                                                        class="bi bi-info-square-fill"></i></a> Not activated
                                                {{/if}}
                                            </td>

                                            <td>
                                                <a href="/admin/{{this.FestId}}/settings/fest-profile/delete-group/{{this.GroupName}}"
                                                    onclick="return confirm('Are you want to delete - {{this.GroupName}} -  group ?')"><button
                                                        class="pointCateoryDeletButton"> <i
                                                            class="bi bi-trash"></i></button></a>
                                            </td>


                                        </tr>

                                        {{/each}}



                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>
                    {{!-- other settings --}}
                    <div style="width: 100%; background-color:rgb(155, 154, 154)" class="settings-items"
                        onclick="clickfive()">
                        <h4><i class="bi bi-three-dots"></i> Other settings</h4>
                        <i id="clickIcon5" style="color: black; " class="bi bi-chevron-down"></i>
                    </div>
                    <div style="display:none" id="manual5" class="fest-profile-settings-item-content">
                        <div class="">
                            <div class="controlPanel-ItemDi">
                                <div class="controlpanel-session-content">
                                    <div style="border-color: gray;" class="cotrolpanel-items">
                                        <div>
                                            <label for=""> Status of Fest
                                                {{#if FestFullDetails.festStatus}}
                                                <span
                                                    style="font-style:italic; color:rgb(0, 107, 41);">(Complited)</span>
                                                {{else}}
                                                <span
                                                    style="font-style:italic; color:rgb(0, 63, 145);">(Renning...)</span>
                                                {{/if}}
                                            </label>
                                            <small
                                                style="display: block; font-style:italic; color:rgb(66, 66, 66); margin-top:5px;"><i
                                                    class="bi bi-info-circle-fill"></i> This
                                                option used only to know status of fest</small>
                                        </div>
                                        <div class="Students-setting-Input-Event">
                                            <a
                                                href="/admin/{{FestDetails.FestId}}/settings/fest-profile/fest-status">
                                                <button style="background-color: var(--color-edit);"><i
                                                        class="bi bi-arrow-repeat"></i> Change</button>
                                            </a>
                                        </div>
                                    </div>
                                    <div style="border-color: gray;" class="cotrolpanel-items">
                                        <label for=""> Exit fest
                                        </label>
                                        <div class="Students-setting-Input-Event">
                                            <a href="/admin/{{FestDetails.FestId}}/logout">
                                                <button style="background-color: var(--color-delete);"><i
                                                        class="bi bi-box-arrow-right"></i> Logout</button>
                                            </a>
                                        </div>
                                    </div>

                                    <div style="border-color: gray;" class="cotrolpanel-items">
                                        <label for=""> Are you want delete Fest
                                        </label>
                                        <div class="Students-setting-Input-Event">
                                            <a
                                                href="/admin/{{FestDetails.FestId}}/settings/fest-profile/delete-fest">
                                                <button
                                                    onclick="return confirm('Are you want to delete - {{FestDetails.FestName}} -  fest ?')"
                                                    style="background-color: var(--color-delete);"><i
                                                        class="bi bi-trash"></i> Delete</button>
                                            </a>
                                        </div>
                                    </div>



                                </div>
                            </div>


                        </div>
                    </div>






                </div>
            </div>
        </div>
        {{#if passwordChangeErr}}
        <div id="close" class="Alert-box-border">
            <div>
                <div class="Alert-box-close-button">
                    <i class="bi bi-x-lg" onclick="closeAlet()"></i>
                </div>
                <div class="Alert-box-header">
                    <i class="bi bi-exclamation-circle"></i>
                    <h4>Login failed !</h4>
                </div>
                <div class="alert-box-content">
                    <h5 id="loginErr">{{passwordChangeErr}}</h5>
                </div>
                <audio autoplay hidden src="/audio/alert/error alert.mp3"></audio>
                {{!-- <audio id="alertAudio" autoplay hidden src="/audio/alert/incurrenct.mp3"></audio> --}}
                {{!-- <audio id="alertAudio" autoplay hidden src=""></audio> --}}
            </div>
        </div>
        {{/if}}
        {{#if passwordChangeSuccess}}
        <div style=" background-color: rgb(138, 255, 177); border-color:rgb(0, 165, 55)" class="groupAlertBorder">
            <div class="groupAlert-box-close-button">
                <i class="bi bi-x-lg" onclick="closeAlet()"></i>
            </div>
            <div class="groupAlertHead" style=" color: rgb(0, 126, 42);">
                <i class="bi bi-exclamation-circle"></i>
                <h4> Success !</h4>
            </div>
            <div class="groupAletCountent" style="color: rgb(56, 95, 69);">
                <h5>{{passwordChangeSuccess}}</h5>
            </div>
            <audio autoplay hidden src="/audio/alert/error alert.mp3"></audio>
        </div>
        {{/if}}
    </div>
</section>



<script>
    var current = document.getElementById('settings').className = "sidebarmenus sidebarmenus-active"

</script>
{{!-- Click one --}}

<script>

    var one = document.getElementById('manualOne')
    var two = document.getElementById('manual2')
    var three = document.getElementById('manual3')
    var four = document.getElementById('manual4')
    var five = document.getElementById('manual5')
    var i = document.getElementById('clickIcon')
    var i2 = document.getElementById('clickIcon2')
    var i3 = document.getElementById('clickIcon3')
    var i4 = document.getElementById('clickIcon4')
    var i5 = document.getElementById('clickIcon5')
    function clickOne() {
        if (one.style.display === "none") {
            one.style.display = "block";
            two.style.display = "none";
            three.style.display = "none";
            four.style.display = "none";
            five.style.display = "none";
            i.className = 'bi bi-chevron-up'
            i2.className = 'bi bi-chevron-down'
            i3.className = 'bi bi-chevron-down'
            i4.className = 'bi bi-chevron-down'
            i5.className = 'bi bi-chevron-down'

        } else {
            one.style.display = "none";
            i.className = 'bi bi-chevron-down'

        }

    }

    function clickTwo() {

        if (two.style.display === "none") {
            one.style.display = "none";
            two.style.display = "block";
            three.style.display = "none";
            four.style.display = "none";
            five.style.display = "none";
            i.className = 'bi bi-chevron-down'
            i2.className = 'bi bi-chevron-up'
            i3.className = 'bi bi-chevron-down'
            i4.className = 'bi bi-chevron-down'
            i5.className = 'bi bi-chevron-down'
        } else {
            two.style.display = "none";
            i2.className = 'bi bi-chevron-down'
        }

    }

    function clickThree() {

        if (three.style.display === "none") {
            one.style.display = "none";
            two.style.display = "none";
            three.style.display = "block";
            four.style.display = "none";
            five.style.display = "none";
            i.className = 'bi bi-chevron-down'
            i2.className = 'bi bi-chevron-down'
            i3.className = 'bi bi-chevron-up'
            i4.className = 'bi bi-chevron-down'
            i5.className = 'bi bi-chevron-down'
        } else {
            three.style.display = "none";
            i3.className = 'bi bi-chevron-down'
        }

    }

    function clickFour() {

        if (four.style.display === "none") {
            one.style.display = "none";
            two.style.display = "none";
            three.style.display = "none";
            four.style.display = "block";
            five.style.display = "none";
            i.className = 'bi bi-chevron-down'
            i2.className = 'bi bi-chevron-down'
            i3.className = 'bi bi-chevron-down'
            i4.className = 'bi bi-chevron-up'
            i5.className = 'bi bi-chevron-down'
        } else {
            four.style.display = "none";
            i4.className = 'bi bi-chevron-down'
        }

    }
    function clickfive() {

        if (five.style.display === "none") {
            one.style.display = "none";
            two.style.display = "none";
            three.style.display = "none";
            four.style.display = "none";
            five.style.display = "block";
            i.className = 'bi bi-chevron-down'
            i2.className = 'bi bi-chevron-down'
            i3.className = 'bi bi-chevron-down'
            i4.className = 'bi bi-chevron-down'
            i5.className = 'bi bi-chevron-up'
        } else {
            five.style.display = "none";
            i5.className = 'bi bi-chevron-down'
        }

    }
</script>

<script>
    function callfun(obj) {
        var noimg = "/images/images/fest logo demo.jpg";
        obj.src = noimg;
    }
</script>

<script>

    var profile = document.getElementById('profile')
    var button = document.getElementById('uploadButton')
    function viewImage(event) {
        if (event.target.files && event.target.files[0]) {
            const file = event.target.files[0];
            const profileValue = profile.value;
            const maxFileSize = 1048576; // 1 MB
            const maxWidth = 400;
            const maxHeight = 400;
            const img = new Image();
            img.src = URL.createObjectURL(file);
            img.onload = () => {
                if (file.size > maxFileSize) {
                    alert('The selected image file is too big. Please choose smaller than 1 MB'); //
                } else if (file.type.match('image.*') && (img.width !== maxWidth || img.height !== maxHeight)) {
                    alert(`The selected image is too big. Select the ${maxWidth} px x ${maxHeight} px image.`);
                } else {
                    // view image onclick in image tag
                    document.getElementById('profileview').src = URL.createObjectURL(event.target.files[0])
                    button.style.display = 'block'

                }
            };
        }
    };
</script>

<script>
    function checkPassword() {
        var password = document.getElementById('password').value
        var cpassword = document.getElementById('Cpassword').value


        if (password === cpassword) {
            alert('New password not matched')

            return false;
        }
    }

</script>

{{!-- password validate --}}
<script>
    const form = document.getElementById('changepasswordForm');
    const password = document.getElementById('password');
    const cpassword = document.getElementById('Cpassword');
    function sessionOneInputs() {
        const passwordValue = password.value;
        const cpasswordValue = cpassword.value;
        if (passwordValue !== cpasswordValue) {

            alert('Passwords does not match')
            return false;
        } else {
            setSuccessFor(cpassword);
        }
    }

</script>


{{!-- show password --}}
<script>
    function showOldPassword() {
        var x = document.getElementById("oldPassword");
        var i = document.getElementById("Icon1");

        if (x.type === "password") {
            x.type = "text"
            i.className = "bi bi-eye-slash-fill"

        } else {
            x.type = "password"
            i.className = "bi bi-eye-fill"
        }
    }
    function showPassword() {
        var x = document.getElementById("password");
        var i = document.getElementById("Icon2");

        if (x.type === "password") {
            x.type = "text"
            i.className = "bi bi-eye-slash-fill"

        } else {
            x.type = "password"
            i.className = "bi bi-eye-fill"
        }
    }
    function showCPassword() {
        var x = document.getElementById("Cpassword");
        var i = document.getElementById("Icon3");

        if (x.type === "password") {
            x.type = "text"
            i.className = "bi bi-eye-slash-fill"

        } else {
            x.type = "password"
            i.className = "bi bi-eye-fill"
        }
    }
</script>


{{!-- table jqury --}}
<script>
    $(document).ready(function () {
        $('#allGroup-table').DataTable();
    });
</script>

{{!-- table auto sl no --}}
<style>
    body {
        counter-reset: Serial;
        /* Set the Serial counter to 0 */
    }

    table {
        border-collapse: separate;
    }

    .auto-index td:first-child:before {
        counter-increment: Serial;
        /* Increment the Serial counter */
        content: counter(Serial);
        /* Display the counter */
    }
</style>

{{!-- Uploading --}}
<script>
    function uploading() {
        let button = document.getElementById("uploadButton")
        button.innerHTML = "Uploading..."
    }
</script>
